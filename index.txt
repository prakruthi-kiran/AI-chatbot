<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Museum Tickets - AI Assistant</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <h1>üèõÔ∏è Museum Tickets</h1>
                <p>Book your visit with our AI assistant</p>
            </div>
        </header>

        <main class="main-content">
            <div class="chat-container">
                <div class="chat-header">
                    <div class="bot-info">
                        <div class="bot-avatar">ü§ñ</div>
                        <div class="bot-details">
                            <h3>Museum Assistant</h3>
                            <span class="status">Online</span>
                        </div>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="message bot-message">
                        <div class="message-avatar">ü§ñ</div>
                        <div class="message-content">
                            <p>Welcome to the Museum Ticketing System! I'm here to help you book tickets for our amazing museums.</p>
                            <p>I can help you with:</p>
                            <ul>
                                <li>üé® Art Museum tickets</li>
                                <li>ü¶ï Natural History Museum</li>
                                <li>üöÄ Science & Technology Museum</li>
                                <li>üè∫ History & Culture Museum</li>
                            </ul>
                            <p>Which museum would you like to visit?</p>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <h4>Quick Actions:</h4>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="selectMuseum('art')">üé® Art Museum</button>
                        <button class="action-btn" onclick="selectMuseum('natural')">ü¶ï Natural History</button>
                        <button class="action-btn" onclick="selectMuseum('science')">üöÄ Science & Tech</button>
                        <button class="action-btn" onclick="selectMuseum('history')">üè∫ History & Culture</button>
                    </div>
                </div>

                <div class="chat-input-container">
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="Type your message here..." onkeypress="handleKeyPress(event)">
                        <button onclick="sendMessage()" class="send-btn">Send</button>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="ticket-info">
                    <h3>Ticket Information</h3>
                    <div class="info-card">
                        <h4>Current Selection</h4>
                        <p id="selectedMuseum">No museum selected</p>
                        <p id="selectedDate">No date selected</p>
                        <p id="selectedTickets">No tickets selected</p>
                        <p id="totalPrice">Total: ‚Çπ0.00</p>
                    </div>
                    
                    <div class="pricing-info">
                        <h4>General Pricing</h4>
                        <ul>
                            <li>Adult: ‚Çπ1,200</li>
                            <li>Student: ‚Çπ800</li>
                            <li>Senior (65+): ‚Çπ900</li>
                            <li>Child (under 12): ‚Çπ600</li>
                        </ul>
                    </div>

                    <div class="museum-hours">
                        <h4>Museum Hours</h4>
                        <ul>
                            <li>Mon-Fri: 9:00 AM - 6:00 PM</li>
                            <li>Saturday: 10:00 AM - 8:00 PM</li>
                            <li>Sunday: 11:00 AM - 5:00 PM</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        let currentStep = 'museum';
        let bookingData = {
            museum: '',
            date: '',
            tickets: {},
            total: 0
        };

        const museums = {
            'art': 'Art Museum',
            'natural': 'Natural History Museum',
            'science': 'Science & Technology Museum',
            'history': 'History & Culture Museum'
        };

        const pricing = {
            adult: 1200.00,
            student: 800.00,
            senior: 900.00,
            child: 600.00
        };

        function selectMuseum(museumType) {
            bookingData.museum = museumType;
            document.getElementById('selectedMuseum').textContent = museums[museumType];
            
            addBotMessage(`Great choice! You've selected the ${museums[museumType]}. Now, which date would you like to visit? Please enter a date (e.g., "December 15, 2024" or "next Friday").`);
            currentStep = 'date';
        }

        function addBotMessage(message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot-message';
            messageDiv.innerHTML = `
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                    <p>${message}</p>
                </div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addUserMessage(message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user-message';
            messageDiv.innerHTML = `
                <div class="message-content">
                    <p>${message}</p>
                </div>
                <div class="message-avatar">üë§</div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message === '') return;
            
            addUserMessage(message);
            input.value = '';
            
            setTimeout(() => {
                processUserMessage(message);
            }, 500);
        }

        function processUserMessage(message) {
            switch (currentStep) {
                case 'museum':
                    addBotMessage("Please select a museum from the quick actions above, or tell me which museum you'd like to visit.");
                    break;
                
                case 'date':
                    bookingData.date = message;
                    document.getElementById('selectedDate').textContent = message;
                    addBotMessage(`Perfect! Your visit is scheduled for ${message}. Now, how many tickets do you need?<br><br>Please specify:<br>‚Ä¢ Adults (‚Çπ1,200 each)<br>‚Ä¢ Students (‚Çπ800 each)<br>‚Ä¢ Seniors 65+ (‚Çπ900 each)<br>‚Ä¢ Children under 12 (‚Çπ600 each)<br><br>Example: "2 adults and 1 child"`);
                    currentStep = 'tickets';
                    break;
                
                case 'tickets':
                    parseTicketRequest(message);
                    break;
                
                case 'confirm':
                    if (message.toLowerCase().includes('yes') || message.toLowerCase().includes('confirm')) {
                        addBotMessage(`üéâ Wonderful! Your tickets have been booked successfully!<br><br><strong>Booking Confirmation:</strong><br>Museum: ${museums[bookingData.museum]}<br>Date: ${bookingData.date}<br>Tickets: ${formatTickets()}<br>Total: ‚Çπ${bookingData.total.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2})}<br><br>You will receive a confirmation email shortly. Have a wonderful visit! üèõÔ∏è`);
                        resetBooking();
                    } else {
                        addBotMessage("No problem! Let's start over. Which museum would you like to visit?");
                        resetBooking();
                    }
                    break;
            }
        }

        function parseTicketRequest(message) {
            const lowerMessage = message.toLowerCase();
            let tickets = {};
            let total = 0;
            
            // Simple parsing for demo purposes
            const adultMatch = lowerMessage.match(/(\d+)\s*adult/);
            const studentMatch = lowerMessage.match(/(\d+)\s*student/);
            const seniorMatch = lowerMessage.match(/(\d+)\s*senior/);
            const childMatch = lowerMessage.match(/(\d+)\s*child/);
            
            if (adultMatch) {
                tickets.adult = parseInt(adultMatch[1]);
                total += tickets.adult * pricing.adult;
            }
            if (studentMatch) {
                tickets.student = parseInt(studentMatch[1]);
                total += tickets.student * pricing.student;
            }
            if (seniorMatch) {
                tickets.senior = parseInt(seniorMatch[1]);
                total += tickets.senior * pricing.senior;
            }
            if (childMatch) {
                tickets.child = parseInt(childMatch[1]);
                total += tickets.child * pricing.child;
            }
            
            if (Object.keys(tickets).length === 0) {
                addBotMessage("I couldn't understand your ticket request. Please specify the number and type of tickets you need. For example: '2 adults and 1 child'");
                return;
            }
            
            bookingData.tickets = tickets;
            bookingData.total = total;
            
            updateTicketDisplay();
            
            addBotMessage(`Excellent! Here's your booking summary:<br><br><strong>${museums[bookingData.museum]}</strong><br>Date: ${bookingData.date}<br>Tickets: ${formatTickets()}<br><strong>Total: ‚Çπ${total.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong><br><br>Would you like to confirm this booking? (Yes/No)`);
            currentStep = 'confirm';
        }

        function formatTickets() {
            const parts = [];
            if (bookingData.tickets.adult) parts.push(`${bookingData.tickets.adult} Adult(s)`);
            if (bookingData.tickets.student) parts.push(`${bookingData.tickets.student} Student(s)`);
            if (bookingData.tickets.senior) parts.push(`${bookingData.tickets.senior} Senior(s)`);
            if (bookingData.tickets.child) parts.push(`${bookingData.tickets.child} Child(ren)`);
            return parts.join(', ');
        }

        function updateTicketDisplay() {
            document.getElementById('selectedTickets').textContent = formatTickets();
            document.getElementById('totalPrice').textContent = `Total: ‚Çπ${bookingData.total.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
        }

        function resetBooking() {
            currentStep = 'museum';
            bookingData = {
                museum: '',
                date: '',
                tickets: {},
                total: 0
            };
            document.getElementById('selectedMuseum').textContent = 'No museum selected';
            document.getElementById('selectedDate').textContent = 'No date selected';
            document.getElementById('selectedTickets').textContent = 'No tickets selected';
            document.getElementById('totalPrice').textContent = 'Total: ‚Çπ0.00';
        }
    </script>
</body>
</html>